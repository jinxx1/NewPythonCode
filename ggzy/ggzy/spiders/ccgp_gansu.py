# -*- coding: utf-8 -*-
import scrapy
import json
import re
import pprint
from urllib import parse as urlparse
from bs4 import BeautifulSoup
from ggzy.items import GgzyItem
from ggzy.parseScrpy import get_timestr
from ggzy.mysqlprecess import get_dupurl
import time
from dateutil.relativedelta import relativedelta
import datetime
import sqlalchemy
import os

class CcgpGansuSpider(scrapy.Spider):

    name = 'ccgp_gansu'
    allowed_domains = ['www.ccgp-gansu.gov.cn']
    # '''http://www.ccgp-gansu.gov.cn/web/doSearchmxarticlelssj.action'''
    base_url = 'http://www.ccgp-gansu.gov.cn/web/doSearchmxarticle.action?limit=20&start={}'
    urlDict = [{'catName': '甘肃省_省级_公开招标', 'dtype': 'd62', 'classname': 'c1280501'},
               {'catName': '甘肃省_省级_邀请招标', 'dtype': 'd62', 'classname': 'c1280502'},
               {'catName': '甘肃省_省级_询价公告', 'dtype': 'd62', 'classname': 'c1280101'},
               {'catName': '甘肃省_省级_竞争性谈判', 'dtype': 'd62', 'classname': 'c1280103'},
               {'catName': '甘肃省_省级_竞争性磋商', 'dtype': 'd62', 'classname': 'c1280104'},
               {'catName': '甘肃省_省级_单一来源', 'dtype': 'd62', 'classname': 'c1280102'},
               {'catName': '甘肃省_省级_单一来源公示', 'dtype': 'd62', 'classname': 'c1280105'},
               {'catName': '甘肃省_省级_资格预审公告', 'dtype': 'd62', 'classname': 'c12806'},
               {'catName': '甘肃省_省级_中标公告', 'dtype': 'd62', 'classname': 'c12802'},
               {'catName': '甘肃省_省级_成交公告', 'dtype': 'd62', 'classname': 'c12804'},
               {'catName': '甘肃省_省级_更正公告', 'dtype': 'd62', 'classname': 'c12803'},
               {'catName': '甘肃省_省级_废标/终止公告', 'dtype': 'd62', 'classname': 'c12807'},
               {'catName': '甘肃省_省级_其他公告', 'dtype': 'd62', 'classname': 'c12820'},
               {'catName': '甘肃省_兰州市_公开招标', 'dtype': 'd6201', 'classname': 'c1280501'},
               {'catName': '甘肃省_兰州市_邀请招标', 'dtype': 'd6201', 'classname': 'c1280502'},
               {'catName': '甘肃省_兰州市_询价公告', 'dtype': 'd6201', 'classname': 'c1280101'},
               {'catName': '甘肃省_兰州市_竞争性谈判', 'dtype': 'd6201', 'classname': 'c1280103'},
               {'catName': '甘肃省_兰州市_竞争性磋商', 'dtype': 'd6201', 'classname': 'c1280104'},
               {'catName': '甘肃省_兰州市_单一来源', 'dtype': 'd6201', 'classname': 'c1280102'},
               {'catName': '甘肃省_兰州市_单一来源公示', 'dtype': 'd6201', 'classname': 'c1280105'},
               {'catName': '甘肃省_兰州市_资格预审公告', 'dtype': 'd6201', 'classname': 'c12806'},
               {'catName': '甘肃省_兰州市_中标公告', 'dtype': 'd6201', 'classname': 'c12802'},
               {'catName': '甘肃省_兰州市_成交公告', 'dtype': 'd6201', 'classname': 'c12804'},
               {'catName': '甘肃省_兰州市_更正公告', 'dtype': 'd6201', 'classname': 'c12803'},
               {'catName': '甘肃省_兰州市_废标/终止公告', 'dtype': 'd6201', 'classname': 'c12807'},
               {'catName': '甘肃省_兰州市_其他公告', 'dtype': 'd6201', 'classname': 'c12820'},
               {'catName': '甘肃省_白银市_公开招标', 'dtype': 'd6204', 'classname': 'c1280501'},
               {'catName': '甘肃省_白银市_邀请招标', 'dtype': 'd6204', 'classname': 'c1280502'},
               {'catName': '甘肃省_白银市_询价公告', 'dtype': 'd6204', 'classname': 'c1280101'},
               {'catName': '甘肃省_白银市_竞争性谈判', 'dtype': 'd6204', 'classname': 'c1280103'},
               {'catName': '甘肃省_白银市_竞争性磋商', 'dtype': 'd6204', 'classname': 'c1280104'},
               {'catName': '甘肃省_白银市_单一来源', 'dtype': 'd6204', 'classname': 'c1280102'},
               {'catName': '甘肃省_白银市_单一来源公示', 'dtype': 'd6204', 'classname': 'c1280105'},
               {'catName': '甘肃省_白银市_资格预审公告', 'dtype': 'd6204', 'classname': 'c12806'},
               {'catName': '甘肃省_白银市_中标公告', 'dtype': 'd6204', 'classname': 'c12802'},
               {'catName': '甘肃省_白银市_成交公告', 'dtype': 'd6204', 'classname': 'c12804'},
               {'catName': '甘肃省_白银市_更正公告', 'dtype': 'd6204', 'classname': 'c12803'},
               {'catName': '甘肃省_白银市_废标/终止公告', 'dtype': 'd6204', 'classname': 'c12807'},
               {'catName': '甘肃省_白银市_其他公告', 'dtype': 'd6204', 'classname': 'c12820'},
               {'catName': '甘肃省_临夏州_公开招标', 'dtype': 'd6229', 'classname': 'c1280501'},
               {'catName': '甘肃省_临夏州_邀请招标', 'dtype': 'd6229', 'classname': 'c1280502'},
               {'catName': '甘肃省_临夏州_询价公告', 'dtype': 'd6229', 'classname': 'c1280101'},
               {'catName': '甘肃省_临夏州_竞争性谈判', 'dtype': 'd6229', 'classname': 'c1280103'},
               {'catName': '甘肃省_临夏州_竞争性磋商', 'dtype': 'd6229', 'classname': 'c1280104'},
               {'catName': '甘肃省_临夏州_单一来源', 'dtype': 'd6229', 'classname': 'c1280102'},
               {'catName': '甘肃省_临夏州_单一来源公示', 'dtype': 'd6229', 'classname': 'c1280105'},
               {'catName': '甘肃省_临夏州_资格预审公告', 'dtype': 'd6229', 'classname': 'c12806'},
               {'catName': '甘肃省_临夏州_中标公告', 'dtype': 'd6229', 'classname': 'c12802'},
               {'catName': '甘肃省_临夏州_成交公告', 'dtype': 'd6229', 'classname': 'c12804'},
               {'catName': '甘肃省_临夏州_更正公告', 'dtype': 'd6229', 'classname': 'c12803'},
               {'catName': '甘肃省_临夏州_废标/终止公告', 'dtype': 'd6229', 'classname': 'c12807'},
               {'catName': '甘肃省_临夏州_其他公告', 'dtype': 'd6229', 'classname': 'c12820'},
               {'catName': '甘肃省_武威市_公开招标', 'dtype': 'd6206', 'classname': 'c1280501'},
               {'catName': '甘肃省_武威市_邀请招标', 'dtype': 'd6206', 'classname': 'c1280502'},
               {'catName': '甘肃省_武威市_询价公告', 'dtype': 'd6206', 'classname': 'c1280101'},
               {'catName': '甘肃省_武威市_竞争性谈判', 'dtype': 'd6206', 'classname': 'c1280103'},
               {'catName': '甘肃省_武威市_竞争性磋商', 'dtype': 'd6206', 'classname': 'c1280104'},
               {'catName': '甘肃省_武威市_单一来源', 'dtype': 'd6206', 'classname': 'c1280102'},
               {'catName': '甘肃省_武威市_单一来源公示', 'dtype': 'd6206', 'classname': 'c1280105'},
               {'catName': '甘肃省_武威市_资格预审公告', 'dtype': 'd6206', 'classname': 'c12806'},
               {'catName': '甘肃省_武威市_中标公告', 'dtype': 'd6206', 'classname': 'c12802'},
               {'catName': '甘肃省_武威市_成交公告', 'dtype': 'd6206', 'classname': 'c12804'},
               {'catName': '甘肃省_武威市_更正公告', 'dtype': 'd6206', 'classname': 'c12803'},
               {'catName': '甘肃省_武威市_废标/终止公告', 'dtype': 'd6206', 'classname': 'c12807'},
               {'catName': '甘肃省_武威市_其他公告', 'dtype': 'd6206', 'classname': 'c12820'},
               {'catName': '甘肃省_张掖市_公开招标', 'dtype': 'd6207', 'classname': 'c1280501'},
               {'catName': '甘肃省_张掖市_邀请招标', 'dtype': 'd6207', 'classname': 'c1280502'},
               {'catName': '甘肃省_张掖市_询价公告', 'dtype': 'd6207', 'classname': 'c1280101'},
               {'catName': '甘肃省_张掖市_竞争性谈判', 'dtype': 'd6207', 'classname': 'c1280103'},
               {'catName': '甘肃省_张掖市_竞争性磋商', 'dtype': 'd6207', 'classname': 'c1280104'},
               {'catName': '甘肃省_张掖市_单一来源', 'dtype': 'd6207', 'classname': 'c1280102'},
               {'catName': '甘肃省_张掖市_单一来源公示', 'dtype': 'd6207', 'classname': 'c1280105'},
               {'catName': '甘肃省_张掖市_资格预审公告', 'dtype': 'd6207', 'classname': 'c12806'},
               {'catName': '甘肃省_张掖市_中标公告', 'dtype': 'd6207', 'classname': 'c12802'},
               {'catName': '甘肃省_张掖市_成交公告', 'dtype': 'd6207', 'classname': 'c12804'},
               {'catName': '甘肃省_张掖市_更正公告', 'dtype': 'd6207', 'classname': 'c12803'},
               {'catName': '甘肃省_张掖市_废标/终止公告', 'dtype': 'd6207', 'classname': 'c12807'},
               {'catName': '甘肃省_张掖市_其他公告', 'dtype': 'd6207', 'classname': 'c12820'},
               {'catName': '甘肃省_酒泉市_公开招标', 'dtype': 'd6209', 'classname': 'c1280501'},
               {'catName': '甘肃省_酒泉市_邀请招标', 'dtype': 'd6209', 'classname': 'c1280502'},
               {'catName': '甘肃省_酒泉市_询价公告', 'dtype': 'd6209', 'classname': 'c1280101'},
               {'catName': '甘肃省_酒泉市_竞争性谈判', 'dtype': 'd6209', 'classname': 'c1280103'},
               {'catName': '甘肃省_酒泉市_竞争性磋商', 'dtype': 'd6209', 'classname': 'c1280104'},
               {'catName': '甘肃省_酒泉市_单一来源', 'dtype': 'd6209', 'classname': 'c1280102'},
               {'catName': '甘肃省_酒泉市_单一来源公示', 'dtype': 'd6209', 'classname': 'c1280105'},
               {'catName': '甘肃省_酒泉市_资格预审公告', 'dtype': 'd6209', 'classname': 'c12806'},
               {'catName': '甘肃省_酒泉市_中标公告', 'dtype': 'd6209', 'classname': 'c12802'},
               {'catName': '甘肃省_酒泉市_成交公告', 'dtype': 'd6209', 'classname': 'c12804'},
               {'catName': '甘肃省_酒泉市_更正公告', 'dtype': 'd6209', 'classname': 'c12803'},
               {'catName': '甘肃省_酒泉市_废标/终止公告', 'dtype': 'd6209', 'classname': 'c12807'},
               {'catName': '甘肃省_酒泉市_其他公告', 'dtype': 'd6209', 'classname': 'c12820'},
               {'catName': '甘肃省_嘉峪关市_公开招标', 'dtype': 'd6202', 'classname': 'c1280501'},
               {'catName': '甘肃省_嘉峪关市_邀请招标', 'dtype': 'd6202', 'classname': 'c1280502'},
               {'catName': '甘肃省_嘉峪关市_询价公告', 'dtype': 'd6202', 'classname': 'c1280101'},
               {'catName': '甘肃省_嘉峪关市_竞争性谈判', 'dtype': 'd6202', 'classname': 'c1280103'},
               {'catName': '甘肃省_嘉峪关市_竞争性磋商', 'dtype': 'd6202', 'classname': 'c1280104'},
               {'catName': '甘肃省_嘉峪关市_单一来源', 'dtype': 'd6202', 'classname': 'c1280102'},
               {'catName': '甘肃省_嘉峪关市_单一来源公示', 'dtype': 'd6202', 'classname': 'c1280105'},
               {'catName': '甘肃省_嘉峪关市_资格预审公告', 'dtype': 'd6202', 'classname': 'c12806'},
               {'catName': '甘肃省_嘉峪关市_中标公告', 'dtype': 'd6202', 'classname': 'c12802'},
               {'catName': '甘肃省_嘉峪关市_成交公告', 'dtype': 'd6202', 'classname': 'c12804'},
               {'catName': '甘肃省_嘉峪关市_更正公告', 'dtype': 'd6202', 'classname': 'c12803'},
               {'catName': '甘肃省_嘉峪关市_废标/终止公告', 'dtype': 'd6202', 'classname': 'c12807'},
               {'catName': '甘肃省_嘉峪关市_其他公告', 'dtype': 'd6202', 'classname': 'c12820'},
               {'catName': '甘肃省_金昌市_公开招标', 'dtype': 'd6203', 'classname': 'c1280501'},
               {'catName': '甘肃省_金昌市_邀请招标', 'dtype': 'd6203', 'classname': 'c1280502'},
               {'catName': '甘肃省_金昌市_询价公告', 'dtype': 'd6203', 'classname': 'c1280101'},
               {'catName': '甘肃省_金昌市_竞争性谈判', 'dtype': 'd6203', 'classname': 'c1280103'},
               {'catName': '甘肃省_金昌市_竞争性磋商', 'dtype': 'd6203', 'classname': 'c1280104'},
               {'catName': '甘肃省_金昌市_单一来源', 'dtype': 'd6203', 'classname': 'c1280102'},
               {'catName': '甘肃省_金昌市_单一来源公示', 'dtype': 'd6203', 'classname': 'c1280105'},
               {'catName': '甘肃省_金昌市_资格预审公告', 'dtype': 'd6203', 'classname': 'c12806'},
               {'catName': '甘肃省_金昌市_中标公告', 'dtype': 'd6203', 'classname': 'c12802'},
               {'catName': '甘肃省_金昌市_成交公告', 'dtype': 'd6203', 'classname': 'c12804'},
               {'catName': '甘肃省_金昌市_更正公告', 'dtype': 'd6203', 'classname': 'c12803'},
               {'catName': '甘肃省_金昌市_废标/终止公告', 'dtype': 'd6203', 'classname': 'c12807'},
               {'catName': '甘肃省_金昌市_其他公告', 'dtype': 'd6203', 'classname': 'c12820'},
               {'catName': '甘肃省_天水市_公开招标', 'dtype': 'd6205', 'classname': 'c1280501'},
               {'catName': '甘肃省_天水市_邀请招标', 'dtype': 'd6205', 'classname': 'c1280502'},
               {'catName': '甘肃省_天水市_询价公告', 'dtype': 'd6205', 'classname': 'c1280101'},
               {'catName': '甘肃省_天水市_竞争性谈判', 'dtype': 'd6205', 'classname': 'c1280103'},
               {'catName': '甘肃省_天水市_竞争性磋商', 'dtype': 'd6205', 'classname': 'c1280104'},
               {'catName': '甘肃省_天水市_单一来源', 'dtype': 'd6205', 'classname': 'c1280102'},
               {'catName': '甘肃省_天水市_单一来源公示', 'dtype': 'd6205', 'classname': 'c1280105'},
               {'catName': '甘肃省_天水市_资格预审公告', 'dtype': 'd6205', 'classname': 'c12806'},
               {'catName': '甘肃省_天水市_中标公告', 'dtype': 'd6205', 'classname': 'c12802'},
               {'catName': '甘肃省_天水市_成交公告', 'dtype': 'd6205', 'classname': 'c12804'},
               {'catName': '甘肃省_天水市_更正公告', 'dtype': 'd6205', 'classname': 'c12803'},
               {'catName': '甘肃省_天水市_废标/终止公告', 'dtype': 'd6205', 'classname': 'c12807'},
               {'catName': '甘肃省_天水市_其他公告', 'dtype': 'd6205', 'classname': 'c12820'},
               {'catName': '甘肃省_定西市_公开招标', 'dtype': 'd6211', 'classname': 'c1280501'},
               {'catName': '甘肃省_定西市_邀请招标', 'dtype': 'd6211', 'classname': 'c1280502'},
               {'catName': '甘肃省_定西市_询价公告', 'dtype': 'd6211', 'classname': 'c1280101'},
               {'catName': '甘肃省_定西市_竞争性谈判', 'dtype': 'd6211', 'classname': 'c1280103'},
               {'catName': '甘肃省_定西市_竞争性磋商', 'dtype': 'd6211', 'classname': 'c1280104'},
               {'catName': '甘肃省_定西市_单一来源', 'dtype': 'd6211', 'classname': 'c1280102'},
               {'catName': '甘肃省_定西市_单一来源公示', 'dtype': 'd6211', 'classname': 'c1280105'},
               {'catName': '甘肃省_定西市_资格预审公告', 'dtype': 'd6211', 'classname': 'c12806'},
               {'catName': '甘肃省_定西市_中标公告', 'dtype': 'd6211', 'classname': 'c12802'},
               {'catName': '甘肃省_定西市_成交公告', 'dtype': 'd6211', 'classname': 'c12804'},
               {'catName': '甘肃省_定西市_更正公告', 'dtype': 'd6211', 'classname': 'c12803'},
               {'catName': '甘肃省_定西市_废标/终止公告', 'dtype': 'd6211', 'classname': 'c12807'},
               {'catName': '甘肃省_定西市_其他公告', 'dtype': 'd6211', 'classname': 'c12820'},
               {'catName': '甘肃省_平凉市_公开招标', 'dtype': 'd6208', 'classname': 'c1280501'},
               {'catName': '甘肃省_平凉市_邀请招标', 'dtype': 'd6208', 'classname': 'c1280502'},
               {'catName': '甘肃省_平凉市_询价公告', 'dtype': 'd6208', 'classname': 'c1280101'},
               {'catName': '甘肃省_平凉市_竞争性谈判', 'dtype': 'd6208', 'classname': 'c1280103'},
               {'catName': '甘肃省_平凉市_竞争性磋商', 'dtype': 'd6208', 'classname': 'c1280104'},
               {'catName': '甘肃省_平凉市_单一来源', 'dtype': 'd6208', 'classname': 'c1280102'},
               {'catName': '甘肃省_平凉市_单一来源公示', 'dtype': 'd6208', 'classname': 'c1280105'},
               {'catName': '甘肃省_平凉市_资格预审公告', 'dtype': 'd6208', 'classname': 'c12806'},
               {'catName': '甘肃省_平凉市_中标公告', 'dtype': 'd6208', 'classname': 'c12802'},
               {'catName': '甘肃省_平凉市_成交公告', 'dtype': 'd6208', 'classname': 'c12804'},
               {'catName': '甘肃省_平凉市_更正公告', 'dtype': 'd6208', 'classname': 'c12803'},
               {'catName': '甘肃省_平凉市_废标/终止公告', 'dtype': 'd6208', 'classname': 'c12807'},
               {'catName': '甘肃省_平凉市_其他公告', 'dtype': 'd6208', 'classname': 'c12820'},
               {'catName': '甘肃省_庆阳市_公开招标', 'dtype': 'd6210', 'classname': 'c1280501'},
               {'catName': '甘肃省_庆阳市_邀请招标', 'dtype': 'd6210', 'classname': 'c1280502'},
               {'catName': '甘肃省_庆阳市_询价公告', 'dtype': 'd6210', 'classname': 'c1280101'},
               {'catName': '甘肃省_庆阳市_竞争性谈判', 'dtype': 'd6210', 'classname': 'c1280103'},
               {'catName': '甘肃省_庆阳市_竞争性磋商', 'dtype': 'd6210', 'classname': 'c1280104'},
               {'catName': '甘肃省_庆阳市_单一来源', 'dtype': 'd6210', 'classname': 'c1280102'},
               {'catName': '甘肃省_庆阳市_单一来源公示', 'dtype': 'd6210', 'classname': 'c1280105'},
               {'catName': '甘肃省_庆阳市_资格预审公告', 'dtype': 'd6210', 'classname': 'c12806'},
               {'catName': '甘肃省_庆阳市_中标公告', 'dtype': 'd6210', 'classname': 'c12802'},
               {'catName': '甘肃省_庆阳市_成交公告', 'dtype': 'd6210', 'classname': 'c12804'},
               {'catName': '甘肃省_庆阳市_更正公告', 'dtype': 'd6210', 'classname': 'c12803'},
               {'catName': '甘肃省_庆阳市_废标/终止公告', 'dtype': 'd6210', 'classname': 'c12807'},
               {'catName': '甘肃省_庆阳市_其他公告', 'dtype': 'd6210', 'classname': 'c12820'},
               {'catName': '甘肃省_陇南市_公开招标', 'dtype': 'd6212', 'classname': 'c1280501'},
               {'catName': '甘肃省_陇南市_邀请招标', 'dtype': 'd6212', 'classname': 'c1280502'},
               {'catName': '甘肃省_陇南市_询价公告', 'dtype': 'd6212', 'classname': 'c1280101'},
               {'catName': '甘肃省_陇南市_竞争性谈判', 'dtype': 'd6212', 'classname': 'c1280103'},
               {'catName': '甘肃省_陇南市_竞争性磋商', 'dtype': 'd6212', 'classname': 'c1280104'},
               {'catName': '甘肃省_陇南市_单一来源', 'dtype': 'd6212', 'classname': 'c1280102'},
               {'catName': '甘肃省_陇南市_单一来源公示', 'dtype': 'd6212', 'classname': 'c1280105'},
               {'catName': '甘肃省_陇南市_资格预审公告', 'dtype': 'd6212', 'classname': 'c12806'},
               {'catName': '甘肃省_陇南市_中标公告', 'dtype': 'd6212', 'classname': 'c12802'},
               {'catName': '甘肃省_陇南市_成交公告', 'dtype': 'd6212', 'classname': 'c12804'},
               {'catName': '甘肃省_陇南市_更正公告', 'dtype': 'd6212', 'classname': 'c12803'},
               {'catName': '甘肃省_陇南市_废标/终止公告', 'dtype': 'd6212', 'classname': 'c12807'},
               {'catName': '甘肃省_陇南市_其他公告', 'dtype': 'd6212', 'classname': 'c12820'},
               {'catName': '甘肃省_甘南州_公开招标', 'dtype': 'd6230', 'classname': 'c1280501'},
               {'catName': '甘肃省_甘南州_邀请招标', 'dtype': 'd6230', 'classname': 'c1280502'},
               {'catName': '甘肃省_甘南州_询价公告', 'dtype': 'd6230', 'classname': 'c1280101'},
               {'catName': '甘肃省_甘南州_竞争性谈判', 'dtype': 'd6230', 'classname': 'c1280103'},
               {'catName': '甘肃省_甘南州_竞争性磋商', 'dtype': 'd6230', 'classname': 'c1280104'},
               {'catName': '甘肃省_甘南州_单一来源', 'dtype': 'd6230', 'classname': 'c1280102'},
               {'catName': '甘肃省_甘南州_单一来源公示', 'dtype': 'd6230', 'classname': 'c1280105'},
               {'catName': '甘肃省_甘南州_资格预审公告', 'dtype': 'd6230', 'classname': 'c12806'},
               {'catName': '甘肃省_甘南州_中标公告', 'dtype': 'd6230', 'classname': 'c12802'},
               {'catName': '甘肃省_甘南州_成交公告', 'dtype': 'd6230', 'classname': 'c12804'},
               {'catName': '甘肃省_甘南州_更正公告', 'dtype': 'd6230', 'classname': 'c12803'},
               {'catName': '甘肃省_甘南州_废标/终止公告', 'dtype': 'd6230', 'classname': 'c12807'},
               {'catName': '甘肃省_甘南州_其他公告', 'dtype': 'd6230', 'classname': 'c12820'},
               {'catName': '甘肃省_兰州新区_公开招标', 'dtype': 'd620124', 'classname': 'c1280501'},
               {'catName': '甘肃省_兰州新区_邀请招标', 'dtype': 'd620124', 'classname': 'c1280502'},
               {'catName': '甘肃省_兰州新区_询价公告', 'dtype': 'd620124', 'classname': 'c1280101'},
               {'catName': '甘肃省_兰州新区_竞争性谈判', 'dtype': 'd620124', 'classname': 'c1280103'},
               {'catName': '甘肃省_兰州新区_竞争性磋商', 'dtype': 'd620124', 'classname': 'c1280104'},
               {'catName': '甘肃省_兰州新区_单一来源', 'dtype': 'd620124', 'classname': 'c1280102'},
               {'catName': '甘肃省_兰州新区_单一来源公示', 'dtype': 'd620124', 'classname': 'c1280105'},
               {'catName': '甘肃省_兰州新区_资格预审公告', 'dtype': 'd620124', 'classname': 'c12806'},
               {'catName': '甘肃省_兰州新区_中标公告', 'dtype': 'd620124', 'classname': 'c12802'},
               {'catName': '甘肃省_兰州新区_成交公告', 'dtype': 'd620124', 'classname': 'c12804'},
               {'catName': '甘肃省_兰州新区_更正公告', 'dtype': 'd620124', 'classname': 'c12803'},
               {'catName': '甘肃省_兰州新区_废标/终止公告', 'dtype': 'd620124', 'classname': 'c12807'},
               {'catName': '甘肃省_兰州新区_其他公告', 'dtype': 'd620124', 'classname': 'c12820'}]


    def __init__(self, goon=None, *args, **kwargs):
        super(CcgpGansuSpider, self).__init__(*args, **kwargs)
        self.pageS = 100
        self.goon = goon
        self.datePost = {
            'articleSearchInfoVo.releasestarttime': '',
            'articleSearchInfoVo.releaseendtime': '',
            'articleSearchInfoVo.tflag': '1',
            'articleSearchInfoVo.classname': '128',
            'articleSearchInfoVo.dtype': '',
            'articleSearchInfoVo.days': '',
            'articleSearchInfoVo.releasestarttimeold': '',
            'articleSearchInfoVo.releaseendtimeold': '',
            'articleSearchInfoVo.title': '',
            'articleSearchInfoVo.agentname': '',
            'articleSearchInfoVo.bidcode': '',
            'articleSearchInfoVo.proj_name': '',
            'articleSearchInfoVo.buyername': '',
            'total': '5',
            'limit': '20',
            'current': '1',
            'sjm': '7466',
        }

    def start_requests(self):
        meta={}
        meta['Num'] = 0
        yield scrapy.Request(url=self.base_url.format(meta['Num']*20),
                             callback=self.parse,
                             meta=meta,
                             dont_filter=True,
                             method='GET',
                             body=json.dumps(self.datePost)
                             )


    def parse(self, response):
        meta = response.meta
        link = response.xpath("//ul[@class = 'Expand_SearchSLisi']//a/@href").extract()
        print('------------------------',len(link))
